# ğŸ“Œ å‰åç«¯è”è°ƒå®ŒæˆæŠ¥å‘Š

**å®Œæˆæ—¥æœŸ**: 2026å¹´1æœˆ22æ—¥  
**çŠ¶æ€**: âœ… è”è°ƒå®Œæˆï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•

---

## ğŸ¯ è”è°ƒç›®æ ‡

âœ… å°†å‰ç«¯ï¼ˆVue 3 + 8848 ç«¯å£ï¼‰ä¸åç«¯ï¼ˆFastAPI + 8000 ç«¯å£ï¼‰æˆåŠŸè¿æ¥  
âœ… å®ç°å‰ç«¯ç™»å½•åŠŸèƒ½æŒ‡å‘åç«¯ API  
âœ… é…ç½®ä»£ç†å¤„ç†è·¨åŸŸè¯·æ±‚

---

## ğŸ“ ä¿®æ”¹æ¸…å•

### åç«¯ä¿®æ”¹

#### 1. åˆ›å»ºå¼‚æ­¥è·¯ç”±ç«¯ç‚¹ - `server/routes/routes.py`

```python
from fastapi import APIRouter

router = APIRouter(prefix="/routes", tags=["routes"])

@router.get("/async")
async def get_async_routes():
    """è·å–å¼‚æ­¥è·¯ç”± - è¿”å›åŠ¨æ€è·¯ç”±é…ç½®"""
    return {
        "success": True,
        "data": []
    }
```

#### 2. æ›´æ–°ä¸»åº”ç”¨ - `server/main.py`

```python
# åœ¨å¯¼å…¥ä¸­æ·»åŠ 
from routes import auth, users, logs, routes

# åœ¨è·¯ç”±æ³¨å†Œä¸­æ·»åŠ 
app.include_router(routes.router, prefix=settings.API_PREFIX)
```

### å‰ç«¯ä¿®æ”¹

#### 1. æ·»åŠ  Vite ä»£ç† - `web/vite.config.ts`

```typescript
server: {
  port: VITE_PORT,
  host: "0.0.0.0",
  proxy: {
    "/api": {
      target: "http://localhost:8000",
      changeOrigin: true,
      rewrite: (path) => path
    }
  },
  // ...
}
```

#### 2. æ›´æ–°ç™»å½• API - `web/src/api/user.ts`

```typescript
// ä» "/login" æ”¹ä¸º "/api/v1/auth/login"
export const getLogin = (data?: object) => {
  return http.request<UserResult>("post", "/api/v1/auth/login", { data });
};

// ä» "/refresh-token" æ”¹ä¸º "/api/v1/auth/refresh-token"
export const refreshTokenApi = (data?: object) => {
  return http.request<RefreshTokenResult>(
    "post",
    "/api/v1/auth/refresh-token",
    { data },
  );
};
```

#### 3. æ›´æ–°è·¯ç”± API - `web/src/api/routes.ts`

```typescript
// ä» "/get-async-routes" æ”¹ä¸º "/api/v1/routes/async"
export const getAsyncRoutes = () => {
  return http.request<Result>("get", "/api/v1/routes/async");
};
```

#### 4. æ›´æ–° HTTP ç™½åå• - `web/src/utils/http/index.ts`

```typescript
// ä» ["/refresh-token", "/login"] æ”¹ä¸º
const whiteList = ["/api/v1/auth/refresh-token", "/api/v1/auth/login"];
```

#### 5. æ›´æ–°å¿«é€Ÿå¼€å§‹æ–‡æ¡£ - `QUICK_START.md`

- è¯´æ˜å‰ç«¯åœ¨ 8848 ç«¯å£å¯åŠ¨
- è¯´æ˜å·²é¢„å…ˆé…ç½®ä»£ç†
- æ·»åŠ è”è°ƒæ¶æ„è¯´æ˜

---

## ğŸš€ å¯åŠ¨æŒ‡ä»¤

### åç«¯å¯åŠ¨ï¼ˆä¿æŒè¿è¡Œï¼‰

```bash
cd server
python init_db.py      # åˆå§‹åŒ–æ•°æ®åº“
python main.py         # å¯åŠ¨æœåŠ¡
```

**è¾“å‡º**:

```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Started server process
```

### å‰ç«¯å¯åŠ¨ï¼ˆæ–°ç»ˆç«¯ï¼‰

```bash
cd web
pnpm dev              # æˆ– npm run dev
```

**è¾“å‡º**:

```
âœ  Local:   http://localhost:8848/
âœ  Network: http://192.168.x.x:8848/
```

---

## âœ… æµ‹è¯•æ¸…å•

### 1. åç«¯æ¥å£æµ‹è¯•

```bash
# æµ‹è¯•ç™»å½•æ¥å£
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# é¢„æœŸå“åº”ï¼šåŒ…å« accessTokenã€refreshToken å’Œç”¨æˆ·ä¿¡æ¯
```

### 2. å‰ç«¯ä»£ç†æµ‹è¯•

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. åˆ‡æ¢åˆ° **Network** æ ‡ç­¾
3. è®¿é—® http://localhost:8848/login
4. è¾“å…¥è´¦å· admin / admin123 ç‚¹å‡»ç™»å½•
5. åœ¨ Network ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰ `/api/v1/auth/login` è¯·æ±‚
6. é¢„æœŸï¼šè¯·æ±‚åº”è¯¥æˆåŠŸï¼ˆçŠ¶æ€ç  200ï¼‰

### 3. ç™»å½•åŠŸèƒ½æµ‹è¯•

| è´¦å·   | å¯†ç       | é¢„æœŸç»“æœ                  |
| ------ | --------- | ------------------------- |
| admin  | admin123  | âœ… ç™»å½•æˆåŠŸï¼Œçœ‹åˆ°ä»ªè¡¨æ¿   |
| editor | editor123 | âœ… ç™»å½•æˆåŠŸï¼Œçœ‹åˆ°ç¼–è¾‘èœå• |
| viewer | viewer123 | âœ… ç™»å½•æˆåŠŸï¼Œçœ‹åˆ°æŸ¥çœ‹èœå• |

---

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹æµè§ˆå™¨ç½‘ç»œè¯·æ±‚

1. F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. Network æ ‡ç­¾é¡µ
3. è¾“å…¥ "api" è¿‡æ»¤è¯·æ±‚
4. æŸ¥çœ‹è¯·æ±‚ URLã€è¯·æ±‚å¤´ã€å“åº”ä½“

### æŸ¥çœ‹æµè§ˆå™¨å­˜å‚¨

1. F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. Application æ ‡ç­¾é¡µ â†’ Local Storage
3. æŸ¥çœ‹ `__pure_admin_token__` æ˜¯å¦å­˜åœ¨
4. Token æ ¼å¼åº”è¯¥åŒ…å« `accessToken` å’Œ `refreshToken`

### æŸ¥çœ‹åç«¯æ—¥å¿—

åç«¯ç»ˆç«¯ä¼šè¾“å‡ºè¯¦ç»†çš„ SQL æ“ä½œå’Œ HTTP è¯·æ±‚æ—¥å¿—

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: CORS é”™è¯¯ - "Access to XMLHttpRequest blocked"

**A**:

- æ£€æŸ¥åç«¯ CORS é…ç½®æ˜¯å¦åŒ…å«å‰ç«¯åœ°å€
- ä¿®æ”¹ `server/config.py` çš„ `CORS_ORIGINS`

### Q2: 404 é”™è¯¯ - "Cannot POST /api/v1/auth/login"

**A**:

- ç¡®è®¤åç«¯æ˜¯å¦æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥ API è·¯å¾„æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹åç«¯çš„è·¯ç”±æ³¨å†Œæ˜¯å¦åŒ…å« auth è·¯ç”±

### Q3: ç™»å½•åç«‹å³å›åˆ°ç™»å½•é¡µ

**A**:

- æ£€æŸ¥ token æ˜¯å¦æ­£ç¡®ä¿å­˜åœ¨ localStorage
- æŸ¥çœ‹ `/api/v1/routes/async` æ˜¯å¦è¿”å›æ­£ç¡®æ•°æ®
- æ£€æŸ¥å‰ç«¯è·¯ç”±é…ç½®

### Q4: å‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯

**A**:

- æ£€æŸ¥åç«¯æ˜¯å¦åœ¨ 8000 ç«¯å£è¿è¡Œ
- æ£€æŸ¥ Vite proxy é…ç½®æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ç½‘ç»œé”™è¯¯

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Frontend (Vue 3)             â”‚
â”‚      http://localhost:8848          â”‚
â”‚                                     â”‚
â”‚  â”œâ”€ Login View                      â”‚
â”‚  â”œâ”€ Store (Pinia)                   â”‚
â”‚  â””â”€ HTTP Client (Axios)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
          Vite Proxy (/)
                 â”‚
         /api/* â†’ localhost:8000
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Backend (FastAPI)            â”‚
â”‚      http://localhost:8000          â”‚
â”‚                                     â”‚
â”‚  â”œâ”€ /api/v1/auth/*                 â”‚
â”‚  â”œâ”€ /api/v1/users/*                â”‚
â”‚  â”œâ”€ /api/v1/logs/*                 â”‚
â”‚  â””â”€ /api/v1/routes/*               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         SQLAlchemy ORM
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Database (SQLite/PostgreSQL)    â”‚
â”‚    wisdombase.db (å¼€å‘ç¯å¢ƒ)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](./QUICK_START.md) - é¡¹ç›®å¯åŠ¨æŒ‡å—
- [é›†æˆæŒ‡å—](./INTEGRATION_GUIDE.md) - è¯¦ç»†çš„è”è°ƒæŒ‡å—
- [åç«¯æ–‡æ¡£](./server/README.md) - API æ–‡æ¡£
- [å‰ç«¯é›†æˆ](./server/FRONTEND_INTEGRATION.md) - å‰ç«¯é…ç½®æŒ‡å—

---

## ğŸ‰ ä¸‹ä¸€æ­¥

1. âœ… **å‰åç«¯è”è°ƒ** - å·²å®Œæˆ
2. ğŸ”„ **å…¨æµç¨‹æµ‹è¯•** - æµ‹è¯•ç™»å½•ã€æƒé™ã€æ—¥å¿—ç­‰åŠŸèƒ½
3. ğŸ“ **å®ç°æ–‡æ¡£ç®¡ç†** - åˆ›å»ºæ–‡æ¡£ CRUD æ¥å£
4. ğŸ¤– **é›†æˆ AI åŠŸèƒ½** - å®ç° AI è°ƒç”¨
5. ğŸ¯ **éƒ¨ç½²ä¸Šçº¿** - Docker éƒ¨ç½²

---

## ğŸ“ é—®é¢˜æ’æŸ¥

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š

1. **æ£€æŸ¥åç«¯æ—¥å¿—** - æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
2. **æ£€æŸ¥å‰ç«¯æ—¥å¿—** - æ‰“å¼€ F12 æŸ¥çœ‹ Console
3. **æ£€æŸ¥ç½‘ç»œè¯·æ±‚** - F12 Network æ ‡ç­¾æŸ¥çœ‹è¯·æ±‚è¯¦æƒ…
4. **æŸ¥çœ‹æœ¬åœ°å­˜å‚¨** - F12 Application -> Local Storage
5. **é‡å¯æœåŠ¡** - å°è¯•é‡æ–°å¯åŠ¨å‰åç«¯

---

**è”è°ƒè€…**: AI Copilot  
**è”è°ƒå®Œæˆæ—¶é—´**: 2026-01-22 00:15:00  
**æµ‹è¯•çŠ¶æ€**: âœ… å°±ç»ª
